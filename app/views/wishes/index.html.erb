<% content_for :meta_title, "#{@wishlist.title} | Wyshlist" %>
<% content_for :meta_description, @wishlist.description %>
<%= render "shared/user_navbar" %>
<div class="my-container">
    <div class="title-header">
        <div class="title-wrapper">
            <h1><%= @wishlist.title %></h1>
            <br>
            <small class="title-header__description"><%= @wishlist.description %></small>
        </div>
        <div>
        <%# Move to Dashboard edit boards %>
        <%# if user_signed_in? && current_user.owner?(@wishlist) %>
            <%#= link_to edit_wishlist_path(@wishlist) do %>
                <%#= image_tag "edit.png", alt: "edit icon", class: "header-icons" %>
            <%# end %>
            <%#= link_to wishlist_path(@wishlist), id: "delete-wishlist", data: {turbo_method: "delete", turbo_confirm: 'Are you sure?'} do %>
                <%#= image_tag "trash.png", alt: "edit icon", class: "header-icons" %>
            <%# end %>
        <%# end %>
        </div>
    </div>
    <div class="cards-columns">
        <div class="wishes-filter">
            <%# Move to dashboard integrations %>
            <%# unless @wishlist.asana_integration.present? %>
                <%#= link_to new_wishlist_integration_path(@wishlist) do %>
                    <%# <div class="integration-box">
                            Connect to <%= image_tag "asana.svg", alt: "Asana logo" %>
                    <%# </div> %>
                <%# end %>
            <%# end %>
            <ul class="wishes-filter__list">
                <h3> Filter by stage </h3>
                <% Wish.stages.each do |stage| %>
                    <%= render "stage_filter", wishlist: @wishlist, stage: stage %>
                <% end %>
                <br>
             <% if user_signed_in? %>
                <%= turbo_frame_tag "new-wish" do %>
                    <div class="new-wish-wrapper new-wish-sidebar-wrapper">
                        <%= link_to "Add a new ticket", new_wishlist_wish_path(@wishlist), class: "btn-flat sidebar-button", style: "background-color: #{@wishlist&.organization&.color}", id: "add-wish" %>
                    </div>
                <% end %>
            <% else %>
                <div class="new-wish-wrapper">
                    <%= link_to "Add a new ticket", new_user_session_path, class: "btn-flat", id: "add-wish" , style: "background-color: #{@wishlist&.organization&.color}"%>
                </div>
            <% end %>
            <div data-controller="clipboard" data-clipboard-feedback-text-value="Copied!" class="wishes__copy">
                <input type="text" value="<%= request.url %>" data-clipboard-target="source" class="wishes__copy-link" />
                <button type="button" data-action="clipboard#copy" data-clipboard-target="button">
                    <%= image_tag "clipboard.png", class: "wishes__clipboard"%>
                </button>
            </div>
            <br>
            <small> Powered by WyshlistÂ©</small>

            </ul>
        </div>
        <div class="wishes-wrapper">
            <% if @wishes.any? %>
            <%= render "wishes/wishes", wishes: @wishes %>
            <% elsif params[:stage] %>
                <div class="no-wishes">
                    <h2> No contributions at this stage yet </h2>
                    <p> Stay tuned for upcoming changes in the pipeline</p>
                </div>
            <% else %>
                <div class="no-wishes">
                    <h2> No ideas yet! </h2>
                    <p> Be the first to add an idea to this board! Create a new ticket! ðŸš€</p>
                </div>
            <% end %>
            <% if user_signed_in? %>
                <%= turbo_frame_tag "new-wish" do %>
                    <div class="new-wish-wrapper">
                        <%= link_to "Add a new ticket", new_wishlist_wish_path(@wishlist), class: "btn-flat", style: "background-color: #{@wishlist&.organization&.color}", id: "add-wish" %>
                    </div>
                <% end %>
            <% else %>
                <div class="new-wish-wrapper">
                    <%= link_to "Add a new ticket", new_user_session_path, class: "btn-flat", id: "add-wish" , style: "background-color: #{@wishlist&.organization&.color}"%>
                </div>
            <% end %>
        </div>
    </div>
</div>
